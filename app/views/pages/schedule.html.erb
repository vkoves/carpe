<%= render "shared/header" %>
<%= javascript_include_tag "application"%>
<%= stylesheet_link_tag "jquery-ui.min" %>

<br /><div id="cont-hold">
	<h1 class="no-bold zero-bot">Your Schedule</h1>
	<h3 class="no-bold zero-top">It all starts here. The scheduling revolution</h3>
	
	<div id="sch-sidebar">
		<span id="evnt-desc" title="Drag these events onto the schedule to get started">Events</span>
		<div class="sch-evnt sch-class" id="cs" title="Drag to add classes">Class</div>
		<div class="sch-evnt sch-work">Work</div>
		<div class="sch-evnt sch-play">Play</div>
		<div class="sch-evnt sch-hangout">Hangout</div>
	</div>
	<div id="sch-main">
		<div id="sch-days">
			<div class="sch-day-col">Monday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Tuesday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Wednesday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Thursday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Friday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Saturday
				<div class="col-snap evt-snap"></div>
			</div>
			<div class="sch-day-col">Sunday
				<div class="col-snap evt-snap"></div>
			</div>
		</div>
	</div>
</div>
<script>
var sideHMTL;
$("#evnt-desc").tooltip();
addDrag(); //add dragging, recursively
$(".col-snap").droppable({
	drop: function( event, ui ) 
	{
    	ui.draggable.css("color","white");
    	var element = ui.draggable.detach();
		$(this).append(element);
		ui.draggable.css("left","0px");
		$(this).parent().css("background","");
	},
	over: function( event, ui ) {
		$(this).parent().css("background","yellow");
	},
	out: function( event, ui ) {
		$(this).parent().css("background","");
	}
});

function addDrag()
{
	$("#sch-sidebar .sch-evnt").draggable({
		containment: "window",
		snap: ".evt-snap",
		snapMode: "inner",
		appendTo: ".sch-day-col",
		revert: true,
		revertDuration: 0,
		start: function(event, ui)
		{
			sideHTML  = $("#sch-sidebar").html();
		},
		stop: function( event, ui ) 
		{
			var a = $(this).clone();
			$(this).html("WOW");
			$("#sch-sidebar").html(sideHTML);
			addDrag();
		}
	});
}
</script>
