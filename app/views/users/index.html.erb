<% content_for :title do %> - Find Friends<% end %>

<style>
/* Find Friends page stuff */
.user-box
{
	width: 120px;
    margin-bottom: 10px;
    float: left;
    padding: 5px;
}
.user-box .name
{
	font-size: 16px;
	margin-bottom: 7px;
}
</style>
<div class="page-container">
	<h1 class="page-titler">Users
	<% if current_user and current_user.admin %>
		<a href="/admin" class="default" style="position: relative; top: -5px; left: 5px; font-size: 14px;"><span>Admin Panel</span></a>
	<% end %></h1>
	<% users = User.all %>	
	<% if users.size > 0 %>
	<% users = users.sort_by{|u| -current_user.mutual_friends(u).count }%>
	<% users.each do |user| %>
		<% status = current_user.friend_status(user) %>
			<div class="user-box">
				<div class="avatar">
					<a href="/u/<%= user.id %>"><img src="<%= user.user_avatar(100) %>"></a>
				</div>
				<div class="name">
					<%= user.name %><br>
					<% mut = current_user.mutual_friends(user).count %>
					<%= mut %> mutual
				</div>
				<% if status == nil #not friends %>
					<%= link_to friendships_path(:friend_id => user), :method => :post, :class => "default green" do %>
						<span>Add Friend</span>
					<% end %>
				<% elsif status == "friend" %>
					<span class="friend-label">Friend</span>
				<% elsif status == "pending" || status == "denied" %>
					<span class="friend-label">Pending...</span>
				<% end %>
			</div>
	<% end %>
	<% else %>
		No users found with that name!
	<% end %>
</div>
