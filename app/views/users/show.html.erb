<div class="page-container">
<h1><%= @user.name %></h1>

<% if @user == current_user %>
<h2>My Profile</h2>
<% end %>
<h3>Friends</h3>
<ul id="friend-list">
	<% for friendship in @user.friendships %>
		<li class="friend-listing">
			<a href="/u/<%= friendship.friend.id %>">
				<div class="avatar">
				<% if friendship.friend.image_url %>
					<img src="<%= friendship.friend.image_url%>">
				<% else %>
					<img src="http://www.gravatar.com/avatar/?d=mm">
				<% end %>
				</div>
			</a><%= friendship.friend.name %>
			(<%= link_to "remove", friendships_path(:id => friendship.id), :method => :delete %>)
		</li>
	<% end %>
	<%# Inverse friends are when the other person added you, so conveniently, we can who added who. %>
	<% for user in @user.inverse_friends %>
		<li class="friend-listing"><a href="/u/<%= user.id %>">
			<div class="avatar">
			<% if user.image_url %>
				<img src="<%= user.image_url%>">
			<% else %>
				<img src="http://www.gravatar.com/avatar/?d=mm">
			<% end %>
		</div>			
		</a><%= user.name %></li>
	<% end %>
</ul>
<% if @user == current_user %>
	<%= link_to "Find Friends", "/users" %>
<% end %>
</div>
